(function(w,a){"use strict";const W={size:{type:Number},color:{type:String}},y=a.defineComponent({name:"FIcon",props:W,setup(t,{slots:n}){return a.computed(()=>!t.size&&!t.color?{}:{...t.size?{"font-size":t.size+"px"}:{},...t.color?{color:t.color}:{}}),()=>a.createVNode("div",{class:"f-icon",style:{border:"1px solid black"}},[a.renderSlot(n,"default")])}});y.install=function(t){t.component(y.name,y)};const $={title:"Icon 图标",category:"装饰",status:"20%",install(t){t.use(y)}};function T(t,n){const e=new MutationObserver(n);return e.observe(t,{attributes:!0,attributeFilter:["style"],attributeOldValue:!0}),e}var E;const X=typeof window<"u",H=t=>typeof t=="string",O=()=>{};X&&((E=window==null?void 0:window.navigator)!=null&&E.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function P(t){return typeof t=="function"?t():a.unref(t)}function z(t,n){function e(...i){return new Promise((s,l)=>{Promise.resolve(t(()=>n.apply(this,i),{fn:n,thisArg:this,args:i})).then(s).catch(l)})}return e}function F(t,n={}){let e,i,s=O;const l=r=>{clearTimeout(r),s(),s=O};return r=>{const o=P(t),h=P(n.maxWait);return e&&l(e),o<=0||h!==void 0&&h<=0?(i&&(l(i),i=null),Promise.resolve(r())):new Promise((u,d)=>{s=n.rejectOnCancel?d:u,h&&!i&&(i=setTimeout(()=>{e&&l(e),i=null,u(r())},h)),e=setTimeout(()=>{i&&l(i),i=null,u(r())},o)})}}function M(t){return t}function L(t){return a.getCurrentScope()?(a.onScopeDispose(t),!0):!1}function k(t,n=200,e={}){return z(F(n,e),t)}function Q(t){var n;const e=P(t);return(n=e==null?void 0:e.$el)!=null?n:e}const V=X?window:void 0;function j(...t){let n,e,i,s;if(H(t[0])||Array.isArray(t[0])?([e,i,s]=t,n=V):[n,e,i,s]=t,!n)return O;Array.isArray(e)||(e=[e]),Array.isArray(i)||(i=[i]);const l=[],c=()=>{l.forEach(u=>u()),l.length=0},r=(u,d,f)=>(u.addEventListener(d,f,s),()=>u.removeEventListener(d,f,s)),o=a.watch(()=>Q(n),u=>{c(),u&&l.push(...e.flatMap(d=>i.map(f=>r(u,d,f))))},{immediate:!0,flush:"post"}),h=()=>{o(),c()};return L(h),h}const C=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},x="__vueuse_ssr_handlers__";C[x]=C[x]||{},C[x];var Y;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(Y||(Y={}));var U=Object.defineProperty,A=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,S=(t,n,e)=>n in t?U(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,K=(t,n)=>{for(var e in n||(n={}))q.call(n,e)&&S(t,e,n[e]);if(A)for(var e of A(n))G.call(n,e)&&S(t,e,n[e]);return t};K({linear:M},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});const D=(t,n,e)=>{const i=a.ref(0),s=a.ref(0),l=a.ref(0),c=a.ref(0);let r,o=null,h=null;const u=(m=!0)=>new Promise(p=>{a.nextTick(()=>{h=t.value,i.value=t.value?t.value.clientWidth:0,s.value=t.value?t.value.clientHeight:0,l.value=h?h.getBoundingClientRect().width:0,c.value=h?h.getBoundingClientRect().height:0,t.value?(!i.value||!s.value)&&console.warn("Component width or height is 0px"):console.warn("Failed to get dom node"),typeof n=="function"&&m&&n(),p(!0)})}),d=()=>{o=T(h,r),j(window,"resize",r)},f=()=>{o&&(o.disconnect(),o.takeRecords(),o=null)},g=async()=>{await u(!1),r=k(u,200),d(),typeof e=="function"&&e()};return a.onMounted(()=>{g()}),a.onUnmounted(()=>{f()}),{width:i,height:s,afterWidth:l,afterHeight:c,initWH:u}},v=a.defineComponent({name:"FBorderBox1",setup(t,{slots:n}){const e=a.ref(null),{width:i,height:s,initWH:l}=D(e);return a.onMounted(()=>{console.log("边框加载",e.value)}),{width:i,height:s,initWH:l,borderBox1:e}},render(){const{$slots:t,width:n,height:e}=this;return console.log("边框宽高",n,"/",e),a.createVNode("div",{ref:"borderBox1",class:"f-border-box-1"},[a.createVNode("svg",{class:"f-svg-container",width:n,height:e},null),a.createVNode("div",null,[a.renderSlot(t,"default")])])}});v.install=function(t){t.component(v.name,v)};const J={title:"border 边框",category:"边框",status:"20%",install(t){t.use(v)}},Z={width:{type:Number,default:1920},height:{type:Number,default:1080},onAfterResize:{type:Function,default:()=>{}}},ee={class:"f-screen-container"},_=a.defineComponent({name:"index",props:Z,setup(t){const n=t,e=a.ref(null),i=a.reactive({width:0,height:0,screenWidth:0,screenHeight:0,scaleX:1,scaleY:1,isReady:!1});let s=a.ref(1),l=a.ref(1);a.provide("scaleX",s),a.provide("scaleY",l);const c=()=>{n.width&&n.height?(i.width=n.width,i.height=n.height):(i.width=e.value.clientWidth,i.height=e.value.clientHeight);const{width:d,height:f}=window.screen;i.screenWidth=d,i.screenHeight=f},r=()=>{i.width&&i.height?(e.value.style.width=`${i.width}px`,e.value.style.height=`${i.height}px`):(e.value.style.width=`${i.screenWidth}px`,e.value.style.height=`${i.screenHeight}px`)},o=()=>{const d=document.body.clientWidth,f=document.body.clientHeight,g=i.width||i.screenWidth,m=i.height||i.screenHeight,p=d/+g,b=f/+m;s.value=p,l.value=b,e.value.style.transform=`scale(${p}, ${b})`};return D(e,()=>{c(),r(),o()},()=>{r(),o(),n.onAfterResize(),i.isReady=!0}),(d,f)=>(a.openBlock(),a.createElementBlock("div",ee,[a.createElementVNode("div",{class:"f-screen-inner",ref_key:"screenContainer",ref:e},[a.renderSlot(d.$slots,"default")],512)]))}}),ue="";_.install=function(t){t.component("FScreenContainer",_)};const te={title:"container 容器",category:"容器",status:"20%",install(t){t.use(_)}},ne={width:{type:Number,default:400},height:{type:Number,default:400},radius:{type:Number,default:1.2},strength:{type:Number,default:2},src:{type:String}},ie=1/30;class R{constructor(n,e,i,s,l,c,r){this.x=Math.random()*n>>0,this.y=Math.random()*e>>0,this.targetX=i,this.targetY=s,this.time=l,this.radius=c,this.colors=r,this.opacity=0}draw(n){n.fillStyle=`${this.colors}`,n.fillRect(this.x,this.y,this.radius*2,this.radius*2),n.fill()}update(n,e,i,s){if(this.distanceX=this.targetX-this.x,this.distanceY=this.targetY-this.y,this.velocityX=this.distanceX/this.time,this.velocityY=this.distanceY/this.time,i&&s){let l=i-this.x,c=s-this.y,r=Math.sqrt(l**2+c**2),o=n/r;o=o>7?7:o;let h=Math.atan2(c,l),u=Math.cos(h),d=Math.sin(h),f=u*o*-e,g=d*o*-e;this.velocityX+=f,this.velocityY+=g}this.x+=this.velocityX,this.y+=this.velocityY,this.opacity<1&&(this.opacity+=ie)}change(n,e,i){this.targetX=n,this.targetY=e,this.colors=i}}const B=30;class se{constructor(n,e,i){this.radius=e,this.strength=i,this.canvasEle=n,this.ctx=n.getContext("2d"),this.width=n.width,this.height=n.height,this.particleArr=[],this.canvasEle.onmouseleave=()=>{this.mouseX=0,this.mouseY=0}}changeImg(n){if(this.particleArr.length){let e=n.particleData,i=e.length,s=this.particleArr,l=s.length;for(let r=0;r<i;r++){const{targetX:o,targetY:h,colors:u}=e[r];s[r]?s[r].change(o,h,u):s[r]=new R(this.width,this.height,o,h,B,this.radius,u)}i<l&&(this.particleArr=s.splice(0,i)),s=this.particleArr;let c=s.length;for(;c;){let r=~~(Math.random()*c--),o=s[r],{targetX:h,targetY:u,colors:d}=o;o.targetX=s[c].targetX,o.targetY=s[c].targetY,o.colors=s[c].colors,s[c].targetX=h,s[c].targetY=u,s[c].colors=d}}else this.particleArr=n.particleData.map(e=>new R(this.width,this.height,e.targetX,e.targetY,B,this.radius,e.colors))}drawCanvas(){this.ctx.clearRect(0,0,this.width,this.height),this.particleArr.forEach(n=>{n.update(30,this.strength,this.mouseX,this.mouseY),n.draw(this.ctx)}),this.requestID=window.requestAnimationFrame(()=>this.drawCanvas())}}const ae=30;class N{constructor(n,e,i,s){this.src=n,this.width=e,this.height=i,this.particleData=[],this.radius=s}createParticleData(n=this.src){return new Promise((e,i)=>{let s=new Image;s.crossOrigin="",s.src=decodeURI(new URL(n,document.currentScript&&document.currentScript.src||new URL("fast-dataview-ui.iife.js",document.baseURI).href).href),s.onload=()=>{const l=document.createElement("canvas"),c=l.getContext("2d"),r=this.width,o=this.height;l.width=r,l.height=o,c==null||c.drawImage(s,0,0,r,o);const h=c==null?void 0:c.getImageData(0,0,r,o).data;c==null||c.clearRect(0,0,this.width,this.height);for(let u=0;u<o;u+=5)for(let d=0;d<r;d+=5){const f=(d+u*r)*4,g=h[f+3];if(g==0)continue;const m=h[f],p=h[f+1],b=h[f+2];if(m+p+b+g){const ce=new R(this.width,this.height,d,u,ae,this.radius,`rgba(${m},${p},${b},${g})`);this.particleData.push(ce)}}e(this.particleData)},s.onerror=()=>{i("图片转化成粒子失败")}})}}const re=["width","height"],I=a.defineComponent({name:"index",props:ne,setup(t,{expose:n}){const e=t;let i=a.inject("scaleX",a.ref(1)),s=a.inject("scaleY",a.ref(1));const l=a.ref(null),c=a.ref(null);let r=a.ref(),o=a.ref();const h=async d=>{o.value=new N(d,e.width,e.height,e.radius),await o.value.createParticleData(),r.value.changeImg(o.value)},u=async()=>{o.value=new N(e.src,e.width,e.height,e.radius),await o.value.createParticleData(),l.value&&(c.value=l.value.getContext("2d"),r.value=new se(l.value,e.radius,e.strength),l.value.addEventListener("mousemove",d=>{const{left:f,top:g}=l.value.getBoundingClientRect(),{clientX:m,clientY:p}=d;r.value.mouseX=(m-f)*(1/i.value),r.value.mouseY=(p-g)*(1/s.value)}),r.value.drawCanvas(),r.value.changeImg(o.value))};return a.onMounted(()=>{u()}),n({toggleImg:h}),(d,f)=>(a.openBlock(),a.createElementBlock("div",null,[a.createElementVNode("canvas",{ref_key:"canvasRef",ref:l,width:e.width,height:e.height},null,8,re)]))}});I.install=function(t){t.component("FDynamicParticle",I)};const oe=[$,J,te,{title:"particle 粒子",category:"粒子",status:"20%",install(t){t.use(I)}}],le={version:"1.0.12",install(t){oe.forEach(n=>t.use(n))}};w.BorderBox1=v,w.DynamicParticle=I,w.Icon=y,w.ScreenContainer=_,w.default=le,Object.defineProperties(w,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})(this["fast-dataview-ui"]=this["fast-dataview-ui"]||{},Vue);
