(function(g,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],s):(g=typeof globalThis<"u"?globalThis:g||self,s(g["fast-dataview-ui"]=g["fast-dataview-ui"]||{},g.Vue))})(this,function(g,s){"use strict";const N={size:{type:Number},color:{type:String}},y=s.defineComponent({name:"FIcon",props:N,setup(t,{slots:n}){return s.computed(()=>!t.size&&!t.color?{}:{...t.size?{"font-size":t.size+"px"}:{},...t.color?{color:t.color}:{}}),()=>s.createVNode("div",{class:"f-icon",style:{border:"1px solid black"}},[s.renderSlot(n,"default")])}});y.install=function(t){t.component(y.name,y)};const W={title:"Icon 图标",category:"装饰",status:"20%",install(t){t.use(y)}};function $(t,n){const e=new MutationObserver(n);return e.observe(t,{attributes:!0,attributeFilter:["style"],attributeOldValue:!0}),e}var E;const X=typeof window<"u",H=t=>typeof t=="string",O=()=>{};X&&((E=window==null?void 0:window.navigator)!=null&&E.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function P(t){return typeof t=="function"?t():s.unref(t)}function z(t,n){function e(...i){return new Promise((r,l)=>{Promise.resolve(t(()=>n.apply(this,i),{fn:n,thisArg:this,args:i})).then(r).catch(l)})}return e}function F(t,n={}){let e,i,r=O;const l=a=>{clearTimeout(a),r(),r=O};return a=>{const o=P(t),h=P(n.maxWait);return e&&l(e),o<=0||h!==void 0&&h<=0?(i&&(l(i),i=null),Promise.resolve(a())):new Promise((u,d)=>{r=n.rejectOnCancel?d:u,h&&!i&&(i=setTimeout(()=>{e&&l(e),i=null,u(a())},h)),e=setTimeout(()=>{i&&l(i),i=null,u(a())},o)})}}function M(t){return t}function L(t){return s.getCurrentScope()?(s.onScopeDispose(t),!0):!1}function k(t,n=200,e={}){return z(F(n,e),t)}function j(t){var n;const e=P(t);return(n=e==null?void 0:e.$el)!=null?n:e}const Q=X?window:void 0;function U(...t){let n,e,i,r;if(H(t[0])||Array.isArray(t[0])?([e,i,r]=t,n=Q):[n,e,i,r]=t,!n)return O;Array.isArray(e)||(e=[e]),Array.isArray(i)||(i=[i]);const l=[],c=()=>{l.forEach(u=>u()),l.length=0},a=(u,d,f)=>(u.addEventListener(d,f,r),()=>u.removeEventListener(d,f,r)),o=s.watch(()=>j(n),u=>{c(),u&&l.push(...e.flatMap(d=>i.map(f=>a(u,d,f))))},{immediate:!0,flush:"post"}),h=()=>{o(),c()};return L(h),h}const x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},C="__vueuse_ssr_handlers__";x[C]=x[C]||{},x[C];var Y;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(Y||(Y={}));var V=Object.defineProperty,A=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,S=(t,n,e)=>n in t?V(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,K=(t,n)=>{for(var e in n||(n={}))q.call(n,e)&&S(t,e,n[e]);if(A)for(var e of A(n))G.call(n,e)&&S(t,e,n[e]);return t};K({linear:M},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});const D=(t,n,e)=>{const i=s.ref(0),r=s.ref(0),l=s.ref(0),c=s.ref(0);let a,o=null,h=null;const u=(w=!0)=>new Promise(m=>{s.nextTick(()=>{h=t.value,i.value=t.value?t.value.clientWidth:0,r.value=t.value?t.value.clientHeight:0,l.value=h?h.getBoundingClientRect().width:0,c.value=h?h.getBoundingClientRect().height:0,t.value?(!i.value||!r.value)&&console.warn("Component width or height is 0px"):console.warn("Failed to get dom node"),typeof n=="function"&&w&&n(),m(!0)})}),d=()=>{o=$(h,a),U(window,"resize",a)},f=()=>{o&&(o.disconnect(),o.takeRecords(),o=null)},p=async()=>{await u(!1),a=k(u,200),d(),typeof e=="function"&&e()};return s.onMounted(()=>{p()}),s.onUnmounted(()=>{f()}),{width:i,height:r,afterWidth:l,afterHeight:c,initWH:u}},v=s.defineComponent({name:"FBorderBox1",setup(t,{slots:n}){const e=s.ref(null),{width:i,height:r,initWH:l}=D(e);return s.onMounted(()=>{console.log("边框加载",e.value)}),{width:i,height:r,initWH:l,borderBox1:e}},render(){const{$slots:t,width:n,height:e}=this;return console.log("边框宽高",n,"/",e),s.createVNode("div",{ref:"borderBox1",class:"f-border-box-1"},[s.createVNode("svg",{class:"f-svg-container",width:n,height:e},null),s.createVNode("div",null,[s.renderSlot(t,"default")])])}});v.install=function(t){t.component(v.name,v)};const J={title:"border 边框",category:"边框",status:"20%",install(t){t.use(v)}},Z={width:{type:Number,default:1920},height:{type:Number,default:1080},onAfterResize:{type:Function,default:()=>{}}},ee={class:"f-screen-container"},b=s.defineComponent({name:"index",props:Z,setup(t){const n=t,e=s.ref(null),i=s.reactive({width:0,height:0,screenWidth:0,screenHeight:0,scaleX:1,scaleY:1,isReady:!1});let r=s.ref(1),l=s.ref(1);s.provide("scaleX",r),s.provide("scaleY",l);const c=()=>{n.width&&n.height?(i.width=n.width,i.height=n.height):(i.width=e.value.clientWidth,i.height=e.value.clientHeight);const{width:d,height:f}=window.screen;i.screenWidth=d,i.screenHeight=f},a=()=>{i.width&&i.height?(e.value.style.width=`${i.width}px`,e.value.style.height=`${i.height}px`):(e.value.style.width=`${i.screenWidth}px`,e.value.style.height=`${i.screenHeight}px`)},o=()=>{const d=document.body.clientWidth,f=document.body.clientHeight,p=i.width||i.screenWidth,w=i.height||i.screenHeight,m=d/+p,_=f/+w;r.value=m,l.value=_,e.value.style.transform=`scale(${m}, ${_})`};return D(e,()=>{c(),a(),o()},()=>{a(),o(),n.onAfterResize(),i.isReady=!0}),(d,f)=>(s.openBlock(),s.createElementBlock("div",ee,[s.createElementVNode("div",{class:"f-screen-inner",ref_key:"screenContainer",ref:e},[s.renderSlot(d.$slots,"default")],512)]))}}),ue="";b.install=function(t){t.component("FScreenContainer",b)};const te={title:"container 容器",category:"容器",status:"20%",install(t){t.use(b)}},ne={width:{type:Number,default:400},height:{type:Number,default:400},radius:{type:Number,default:1.2},strength:{type:Number,default:2},src:{type:String}},ie=1/30;class R{constructor(n,e,i,r,l,c,a){this.x=Math.random()*n>>0,this.y=Math.random()*e>>0,this.targetX=i,this.targetY=r,this.time=l,this.radius=c,this.colors=a,this.opacity=0}draw(n){n.fillStyle=`${this.colors}`,n.fillRect(this.x,this.y,this.radius*2,this.radius*2),n.fill()}update(n,e,i,r){if(this.distanceX=this.targetX-this.x,this.distanceY=this.targetY-this.y,this.velocityX=this.distanceX/this.time,this.velocityY=this.distanceY/this.time,i&&r){let l=i-this.x,c=r-this.y,a=Math.sqrt(l**2+c**2),o=n/a;o=o>7?7:o;let h=Math.atan2(c,l),u=Math.cos(h),d=Math.sin(h),f=u*o*-e,p=d*o*-e;this.velocityX+=f,this.velocityY+=p}this.x+=this.velocityX,this.y+=this.velocityY,this.opacity<1&&(this.opacity+=ie)}change(n,e,i){this.targetX=n,this.targetY=e,this.colors=i}}const T=30;class se{constructor(n,e,i){this.radius=e,this.strength=i,this.canvasEle=n,this.ctx=n.getContext("2d"),this.width=n.width,this.height=n.height,this.particleArr=[],this.canvasEle.onmouseleave=()=>{this.mouseX=0,this.mouseY=0}}changeImg(n){if(this.particleArr.length){let e=n.particleData,i=e.length,r=this.particleArr,l=r.length;for(let a=0;a<i;a++){const{targetX:o,targetY:h,colors:u}=e[a];r[a]?r[a].change(o,h,u):r[a]=new R(this.width,this.height,o,h,T,this.radius,u)}i<l&&(this.particleArr=r.splice(0,i)),r=this.particleArr;let c=r.length;for(;c;){let a=~~(Math.random()*c--),o=r[a],{targetX:h,targetY:u,colors:d}=o;o.targetX=r[c].targetX,o.targetY=r[c].targetY,o.colors=r[c].colors,r[c].targetX=h,r[c].targetY=u,r[c].colors=d}}else this.particleArr=n.particleData.map(e=>new R(this.width,this.height,e.targetX,e.targetY,T,this.radius,e.colors))}drawCanvas(){this.ctx.clearRect(0,0,this.width,this.height),this.particleArr.forEach(n=>{n.update(30,this.strength,this.mouseX,this.mouseY),n.draw(this.ctx)}),this.requestID=window.requestAnimationFrame(()=>this.drawCanvas())}}const re=30;class B{constructor(n,e,i,r){this.src=n,this.width=e,this.height=i,this.particleData=[],this.radius=r}createParticleData(n=this.src){return new Promise((e,i)=>{let r=new Image;r.crossOrigin="",r.src=decodeURI(new URL(n,typeof document>"u"&&typeof location>"u"?new(require("url")).URL("file:"+__filename).href:typeof document>"u"?location.href:document.currentScript&&document.currentScript.src||new URL("fast-dataview-ui.umd.js",document.baseURI).href).href),r.onload=()=>{const l=document.createElement("canvas"),c=l.getContext("2d"),a=this.width,o=this.height;l.width=a,l.height=o,c==null||c.drawImage(r,0,0,a,o);const h=c==null?void 0:c.getImageData(0,0,a,o).data;c==null||c.clearRect(0,0,this.width,this.height);for(let u=0;u<o;u+=5)for(let d=0;d<a;d+=5){const f=(d+u*a)*4,p=h[f+3];if(p==0)continue;const w=h[f],m=h[f+1],_=h[f+2];if(w+m+_+p){const ce=new R(this.width,this.height,d,u,re,this.radius,`rgba(${w},${m},${_},${p})`);this.particleData.push(ce)}}e(this.particleData)},r.onerror=()=>{i("图片转化成粒子失败")}})}}const ae=["width","height"],I=s.defineComponent({name:"index",props:ne,setup(t,{expose:n}){const e=t;let i=s.inject("scaleX",s.ref(1)),r=s.inject("scaleY",s.ref(1));const l=s.ref(null),c=s.ref(null);let a=s.ref(),o=s.ref();const h=async d=>{o.value=new B(d,e.width,e.height,e.radius),await o.value.createParticleData(),a.value.changeImg(o.value)},u=async()=>{o.value=new B(e.src,e.width,e.height,e.radius),await o.value.createParticleData(),l.value&&(c.value=l.value.getContext("2d"),a.value=new se(l.value,e.radius,e.strength),l.value.addEventListener("mousemove",d=>{const{left:f,top:p}=l.value.getBoundingClientRect(),{clientX:w,clientY:m}=d;a.value.mouseX=(w-f)*(1/i.value),a.value.mouseY=(m-p)*(1/r.value)}),a.value.drawCanvas(),a.value.changeImg(o.value))};return s.onMounted(()=>{u()}),n({toggleImg:h}),(d,f)=>(s.openBlock(),s.createElementBlock("div",null,[s.createElementVNode("canvas",{ref_key:"canvasRef",ref:l,width:e.width,height:e.height},null,8,ae)]))}});I.install=function(t){t.component("FDynamicParticle",I)};const oe=[W,J,te,{title:"particle 粒子",category:"粒子",status:"20%",install(t){t.use(I)}}],le={version:"1.0.12",install(t){oe.forEach(n=>t.use(n))}};g.BorderBox1=v,g.DynamicParticle=I,g.Icon=y,g.ScreenContainer=b,g.default=le,Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
